# ============================================
# AllyCAT GraphRAG - Local Configuration
# ============================================
# This configuration uses local services for all components
# Recommended for development, testing, and offline deployments
# Docker image size: ~4+ GB (includes Ollama)

# ============================================
# Pipeline Automation (Docker Only)
# ============================================
# Set to 'true' to automatically run the complete pipeline on container startup
# This will: crawl → process → save to vector DB → process graph → save to graph DB
# For local development, typically set to 'false' to run steps manually
AUTO_RUN_PIPELINE=false

# Website to crawl (required if AUTO_RUN_PIPELINE=true)
WEBSITE_URL=https://your-website.com

# Memory Optimization: Remove pipeline dependencies after completion
# Saves ~350-500 MB RAM (less critical for local development)
# Set to true if running in resource-constrained environments
CLEANUP_PIPELINE_DEPS=false

# ============================================
# LLM Configuration - Local Ollama
# ============================================
LLM_RUN_ENV=local_ollama
LLM_MODEL=ollama/gemma3:1b
# Model to download and use
OLLAMA_MODEL=gemma3:1b
# Alternative local models:
# OLLAMA_MODEL=qwen2.5:1.5b
# OLLAMA_MODEL=llama3.2:1b

# ============================================
# Vector Database - Local Milvus
# ============================================
VECTOR_DB_TYPE=local
# Local database files stored in workspace

# ============================================
# Graph Database - Local or Cloud Neo4j
# ============================================
# Option 1: Local Neo4j (requires separate Neo4j installation)
NEO4J_URI=bolt://localhost:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=your_local_password
NEO4J_DATABASE=neo4j

# Option 2: Or use Neo4j Aura Cloud even in local mode
# NEO4J_URI=neo4j+s://your-instance.databases.neo4j.io
# NEO4J_USERNAME=neo4j
# NEO4J_PASSWORD=your_neo4j_password_here
# NEO4J_DATABASE=neo4j

# ============================================
# Graph Extraction LLM (Cloud API recommended)
# ============================================
# Even in local mode, graph extraction benefits from cloud LLMs
# Set at least one for graph building:
GEMINI_API_KEY=your_gemini_api_key_here
CEREBRAS_API_KEY=your_cerebras_api_key_here

# ============================================
# Application Settings
# ============================================
APP_TYPE=flask_graph

# ============================================
# Port Configuration
# ============================================
# Flask Applications
FLASK_VECTOR_PORT=8081      # app_flask.py (vector-only RAG)
FLASK_GRAPH_PORT=8080       # app_flask_graph.py (GraphRAG - default)

# Chainlit Applications
CHAINLIT_VECTOR_PORT=8082   # app_chainlit.py
CHAINLIT_GRAPH_PORT=8083    # app_chainlit_graph.py

# Docker & External Services
DOCKER_PORT=8080            # External Docker exposed port (host side)
DOCKER_APP_PORT=8080        # Internal container port (container side, set to match your APP_TYPE)
OLLAMA_PORT=11434           # Ollama server port (for local LLM)

# Workspace directory
# For native execution: use relative path 'workspace'
# For Docker: use absolute path '/allycat/workspace'
WORKSPACE_DIR=/allycat/workspace

# ============================================
# Website Crawling Configuration
# ============================================
WEBSITE_URL=https://example.com
CRAWL_MAX_DOWNLOADS=100
CRAWL_MAX_DEPTH=3
WAITTIME_BETWEEN_REQUESTS=0.1

# ============================================
# Embedding Model Configuration
# ============================================
EMBEDDING_MODEL=ibm-granite/granite-embedding-30m-english
EMBEDDING_LENGTH=384
HF_ENDPOINT=https://hf-mirror.com

# ============================================
# Chunking Configuration
# ============================================
CHUNK_SIZE=512
CHUNK_OVERLAP=20

# ============================================
# Graph Extraction Configuration
# ============================================
GRAPH_MIN_ENTITIES=5
GRAPH_MAX_ENTITIES=15
GRAPH_MIN_RELATIONSHIPS=3
GRAPH_MAX_RELATIONSHIPS=8
GRAPH_MIN_CONFIDENCE=0.8
GRAPH_MAX_CONTENT_CHARS=12000
GRAPH_SENTENCE_BOUNDARY_RATIO=0.7

# ============================================
# UI Settings
# ============================================
UI_STARTER_PROMPTS=What is this website? | What are upcoming events? | Who are the partners?
